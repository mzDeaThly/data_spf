{% extends 'base.html' %}
{% block content %}
<h1>ทะเบียนรถ</h1>

<div class="actions">
  <form method="get" class="inline">
    <input type="text" name="q" value="{{ q or '' }}" placeholder="ค้นหาทะเบียน...">
    <button type="submit" class="btn">ค้นหา</button>
  </form>
  <div class="inline">
    <a class="btn" href="{{ url_for('dashboard.vehicles_add') }}">+ เพิ่ม</a>
    <a class="btn ghost" href="{{ url_for('dashboard.vehicles_upload') }}">อัปโหลด CSV</a>
  </div>
</div>

<table>
  <thead>
    <tr>
      <th>ID</th><th>ทะเบียน</th><th>ยี่ห้อ</th><th>รุ่น</th>
      <th>เจ้าจองรถ</th><th>ติดต่อ</th><th>สีรถ</th><th>เลขตัวถัง</th><th>วันที่บันทึก</th><th>จัดการ</th>
    </tr>
  </thead>
  <tbody>
  {% for v in vehicles %}
    <tr>
      <td data-label="ID">{{ v.id }}</td>
      <td data-label="ทะเบียน">{{ v.license_plate }}</td>
      <td data-label="ยี่ห้อ">{{ v.brand or '-' }}</td>
      <td data-label="รุ่น">{{ v.model or '-' }}</td>
      <td data-label="เจ้าของรถ">{{ v.owner_name or '-' }}</td>
      <td data-label="ติดต่อ">{{ v.contact_info or '-' }}</td>
      <td data-label="สีรถ">{{ v.color or '-' }}</td>
      <td data-label="เลขตัวถัง">{{ v.vin or '-' }}</td>
      <td data-label="วันที่บันทึก">{{ v.recorded_date or '-' }}</td>
      <td>
        <div class="inline">
          <a class="btn ghost" href="{{ url_for('dashboard.vehicles_edit', vid=v.id) }}">แก้ไข</a>
          <form method="post" action="{{ url_for('dashboard.vehicles_delete', vid=v.id) }}" class="inline" onsubmit="return confirm('ยืนยันการลบ?')">
            <button class="btn danger" type="submit">ลบ</button>
          </form>
        </div>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
